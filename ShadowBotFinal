#include <SoftwareSerial.h>// import the serial library
#include <Servo.h>
/**
   Right  hand:
  
   37: Shoulder 1 : Black : 0deg - straight or down, 180 means - Up
   35: Shoulder 2 : Gray : 15deg - straight, 90 deg: Maximum stretch
   39: Elbow : White : Range:90-180 : 0deg is back:

   LEft Hand:

   41: Shoulder 1 : Brown : 180: down, 15: UP //Fix 180 to be straight
   53: Shoulder 2 : Green : 0deg is front
   51: Elbow : Blue : 0deg is front

   Left  Leg
   45: Hip : Neon
   47: Knee : Maroon

   Right Leg
   33 : Hip : Orange 
   43: Knee : Red


   Order will be as follows:
   Shoulder 1: Shoulder 2: Elbow: Hip: Knee
   Left then Right
*/

Servo s[6]; //the number here decide the number of servo attached to our arduino
//int s1[] = {6, 25, 5, 24, 7, 26, 9, 22, 10, 23}; //list of correspoding pin numbers s1[0] is the pin nummber of s[0]
//int degintial[] = {90, 90, 180, 0, 90, 120, 100, 0, 180, 145}; 45, 49, 47, 43
int s1[] = {41, 37, 53, 24, 51, 39}; //, 45, 33, 47, 43};
//int degintial[] = {180, 0, 25, 170, 90, 180};
int degintial[] = {180, 0 , 180, 50, 90, 180 , 40, 0, 60, 20 }; //V
//int degintial[] = {90, 90, 145, 50, 180, 120};
int deg_min[] ={15  ,0  ,110, 50 , 90  ,70  ,40  ,0  ,60  ,20 };
int deg_max[] ={180,180,180, 120 ,180,180,160,110,180,130};
int lowerBound[] = {15, 180, 180, 50, 90, 180  };
int upperBound[] = {180, 0, 110, 120, 180, 70 };
int Range[] = {180, 180, 90, 90, 90, 90};
//int degintial[] = {33, 28, 23, 13, 167, 174};
//intial position of each motor
Servo S;

String str = "";
int counter = 0;
int deg = 0;
int numberOfDigit = 0;
int motor_number=0;

void setup() {
  Serial.begin(9600);
  for (int i = 0; i <  sizeof(s) / sizeof(*s); i++)
  {
    s[i].attach(s1[i]);
 
    //    s[i].write(0);
    //    delay(150);
    //    s[i].write(180);
    //    delay(150);
    s[i].write(degintial[i]);//sets every motor to its intial position as specified in deginital
    Serial.print("angle: ");
    Serial.print(degintial[i]);
    Serial.print(" -- Pin Number:");
    Serial.println(s1[i]);
    delay(200);
    
  }
  Serial.println("Connected");
  delay(100);

}
void loop()
{
  if (Serial.available())
  {
    char x = char(Serial.read());
    if (x == ':')
    {
      int angle  = (atoi(str.c_str()));
      degintial[motor_number] = angle;
      int maped_angle = map(angle, 0 , Range[motor_number] , lowerBound[motor_number], upperBound[motor_number]);  
      s[motor_number].write(maped_angle);
      str = "";
      Serial.print("angle: ");
      Serial.print(maped_angle);
      Serial.print(" -- Pin Number:");
      Serial.println(s1[motor_number]);
      delay(100);
    }
    else if (x == '.')
    {
       motor_number  = (atoi(str.c_str()));
       str="";
    }
    else
    {
      str =  str + x;
    }

  }

}
